use advent_2022::day17::{find_cycle, solve_a, solve_b};
use advent_2022::utils::read_lines;

fn main() {
    let data = read_lines("./data/day17.txt");

    println!("Part 1: {}", solve_a(&data, 2022));

    find_cycle(&data, 10000, 145);

    let prefix = [
        1, 2, 2, 2, 0, 1, 2, 1, 3, 0, 0, 1, 3, 0, 0, 0, 2, 2, 2, 0, 1, 2, 1, 2, 0, 0, 2, 0, 2, 0,
        1, 2, 2, 4, 0, 1, 3, 0, 2, 2, 1, 3, 3, 2, 0, 1, 3, 3, 0, 2, 1, 3, 0, 4, 0, 0, 2, 2, 1, 1,
        1, 3, 2, 0, 0, 1, 3, 3, 2, 0, 1, 2, 3, 0, 1, 1, 3, 3, 2, 0, 1, 3, 3, 2, 0, 1, 3, 2, 0, 0,
        0, 3, 3, 0, 0, 1, 3, 2, 2, 2, 1, 3, 2, 1, 0, 1, 3, 3, 2, 0, 1, 3, 3, 4, 0, 0, 0, 3, 0, 0,
        0, 1, 3, 2, 2, 1, 3, 3, 2, 0, 1, 3, 0, 2, 2, 1, 3, 0, 3, 0, 0, 3, 2, 4, 0, 1, 3, 3, 0, 0,
        0, 2, 2, 0, 0, 0, 3, 3, 0, 0, 1, 2, 1, 2, 0, 1, 3, 2, 4, 0, 1, 3, 3, 2, 0, 1, 3, 0, 2, 0,
        1, 2, 3, 0, 1, 1, 3, 3, 0, 0, 1, 2, 3, 2, 0, 1, 3, 2, 0, 2, 1, 3, 3, 2, 0, 1, 0, 3, 0, 0,
        0, 3, 3, 0, 0, 1, 3, 3, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 0, 2, 1, 3, 2, 0, 0, 0, 2, 3, 0, 0,
        1, 3, 3, 2, 2, 1, 3, 3, 2, 0, 1, 3, 3, 2, 0, 1, 3, 2, 2, 0, 1, 3, 3, 2, 0, 1, 3, 2, 2, 2,
        1, 0, 3, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 0, 0, 1, 2, 3, 0, 2, 1, 2, 2, 2, 0, 1, 3, 3, 2, 2,
        0, 0, 3, 0, 0, 0, 3, 3, 0, 2, 1, 3, 0, 2, 2, 0, 2, 2, 2, 2, 0, 3, 2, 2, 0, 1, 3, 2, 2, 0,
        1, 3, 0, 4, 0, 0, 2, 0, 1, 1, 0, 3, 2, 0, 2, 1, 3, 0, 3, 0, 0, 3, 3, 2, 2, 1, 3, 3, 4, 0,
        1, 3, 2, 2, 0, 0, 2, 3, 0, 2, 1, 3, 0, 4, 2, 1, 3, 2, 4, 2, 1, 3, 3, 2, 0, 1, 3, 3, 4, 0,
        1, 3, 3, 2, 0, 0, 2, 2, 0, 2, 0, 2, 3, 2, 2, 1, 2, 3, 0, 1, 1, 3, 3, 0, 0, 1, 3, 2, 0, 1,
        1, 3, 3, 0, 2, 1, 0, 3, 2, 2, 1, 3, 3, 0, 0, 0, 2, 2, 1, 0, 1, 3, 0, 2, 0, 1, 2, 1, 3, 0,
        1, 2, 3, 0, 0, 1, 3, 3, 0, 2, 1, 3, 0, 2, 2, 0, 0, 3, 1, 0, 0, 3, 3, 0, 0, 1, 3, 2, 2, 2,
        0, 0, 1, 3, 0, 1, 2, 2, 2, 0, 1, 3, 2, 0, 0, 1, 3, 3, 0, 2, 0, 2, 2, 0, 0, 1, 3, 3, 0, 0,
        1, 3, 3, 0, 0, 1, 3, 0, 4, 2, 1, 3, 0, 3, 0, 1, 0, 3, 1, 2, 1, 3, 2, 0, 0, 0, 1, 2, 2, 0,
        1, 3, 2, 0, 0, 1, 1, 2, 2, 0, 1, 2, 2, 4, 0, 1, 3, 3, 0, 0, 1, 3, 2, 2, 0, 1, 3, 0, 0, 2,
        1, 3, 3, 0, 0, 1, 2, 3, 4, 0, 1, 3, 3, 0, 2, 0, 2, 2, 0, 2, 1, 2, 3, 0, 0, 1, 3, 2, 4, 0,
        0, 2, 3, 0, 0, 1, 3, 2, 0, 0, 0, 2, 3, 0, 0, 1, 3, 2, 1, 0, 1, 3, 3, 4, 0, 0, 0, 3, 0, 2,
        1, 3, 3, 0, 2, 0, 0, 3, 2, 0, 1, 2, 2, 2, 0, 1, 0, 3, 2, 0, 1, 3, 2, 4, 0, 1, 2, 2, 2, 0,
        1, 3, 3, 4, 0, 0, 2, 2, 2, 0, 1, 2, 1, 2, 0, 1, 3, 2, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 4, 0,
        0, 2, 3, 0, 0, 0, 0, 2, 1, 2, 0, 1, 2, 2, 0, 0, 2, 3, 2, 2, 1, 3, 2, 2, 0, 1, 3, 3, 0, 0,
        1, 2, 2, 1, 1, 1, 3, 3, 2, 0, 1, 2, 1, 3, 0, 1, 0, 3, 1, 1, 1, 3, 3, 4, 0, 1, 3, 0, 3, 2,
        1, 3, 3, 2, 0, 1, 3, 3, 0, 2, 1, 3, 3, 0, 2, 1, 3, 3, 4, 0, 1, 0, 3, 2, 2, 1, 2, 1, 2, 2,
        0, 0, 2, 0, 2, 1, 3, 2, 2, 0, 1, 2, 2, 4, 0, 0, 2, 2, 4, 0, 1, 2, 3, 0, 2, 1, 2, 1, 4, 0,
        0, 0, 3, 0, 0, 1, 3, 3, 0, 0, 1, 3, 2, 0, 2, 1, 2, 1, 2, 0, 1, 2, 2, 2, 2, 1, 3, 3, 0, 0,
        1, 3, 2, 2, 0, 1, 3, 3, 0, 0, 1, 3, 2, 1, 0, 1, 3, 3, 0, 0, 1, 2, 2, 2, 2, 1, 1, 2, 4, 0,
        0, 0, 3, 0, 2, 1, 2, 3, 2, 0, 1, 3, 2, 2, 0, 1, 3, 0, 4, 0, 1, 3, 3, 0, 0, 1, 2, 3, 2, 0,
        1, 3, 0, 3, 0, 1, 3, 2, 0, 0, 1, 3, 3, 2, 0, 1, 3, 0, 2, 0, 1, 3, 0, 2, 2, 1, 2, 1, 2, 0,
        1, 3, 3, 4, 0, 0, 0, 0, 0, 0, 0, 3, 0, 3, 0, 0, 2, 3, 0, 0, 0, 3, 2, 0, 0, 1, 2, 3, 0, 0,
        1, 3, 3, 4, 0, 1, 2, 1, 3, 0, 1, 2, 2, 1, 1, 1, 2, 1, 3, 0, 0, 3, 0, 3, 2, 1, 3, 3, 2, 2,
        1, 3, 3, 0, 0, 1, 2, 3, 0, 1, 0, 3, 2, 0, 2, 1, 3, 0, 4, 0, 1, 0, 3, 0, 0, 1, 3, 3, 0, 0,
        1, 3, 0, 2, 2, 1, 2, 3, 0, 0, 0, 2, 3, 2, 2, 1, 2, 3, 4, 2, 1, 3, 2, 0, 1, 0, 3, 2, 0, 1,
        0, 3, 2, 0, 0, 1, 3, 2, 4, 2, 1, 0, 3, 0, 2, 1, 3, 2, 2, 0, 1, 3, 0, 0, 2, 1, 3, 2, 1, 1,
        0, 3, 0, 2, 0, 1, 3, 3, 2, 2, 1, 3, 3, 2, 0, 1, 2, 1, 2, 2, 1, 1, 2, 2, 0, 1, 2, 1, 1, 1,
        1, 3, 3, 0, 0, 1, 3, 3, 2, 2, 1, 2, 3, 2, 0, 1, 3, 2, 2, 0, 0, 2, 3, 0, 0, 0, 2, 0, 2, 0,
        1, 3, 3, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 4,
    ];
    let cycle = [
        0, 1, 3, 2, 2, 0, 1, 3, 3, 0, 2, 0, 0, 3, 0, 0, 1, 3, 3, 2, 2, 1, 3, 2, 2, 0, 0, 2, 2, 4,
        0, 1, 3, 2, 1, 2, 1, 3, 2, 4, 2, 1, 3, 2, 1, 0, 0, 3, 3, 0, 2, 1, 2, 2, 2, 0, 1, 2, 3, 4,
        0, 1, 2, 1, 2, 0, 1, 3, 3, 2, 0, 1, 3, 0, 3, 0, 1, 3, 2, 0, 0, 1, 3, 3, 0, 0, 0, 2, 0, 3,
        0, 1, 2, 1, 3, 0, 1, 2, 2, 2, 0, 1, 2, 2, 0, 0, 1, 2, 1, 4, 2, 1, 3, 3, 2, 0, 1, 2, 3, 2,
        0, 1, 3, 3, 0, 0, 1, 2, 1, 2, 0, 1, 3, 2, 2, 0, 1, 3, 2, 0, 1, 1, 3, 3, 0, 0, 1, 3, 2, 4,
        0, 0, 0, 3, 0, 0, 1, 2, 3, 4, 0, 1, 3, 3, 0, 0, 1, 3, 2, 0, 0, 1, 3, 3, 2, 0, 1, 3, 2, 2,
        0, 1, 3, 3, 2, 2, 1, 2, 3, 0, 1, 1, 3, 2, 0, 2, 1, 3, 3, 2, 0, 1, 3, 3, 0, 2, 1, 1, 2, 4,
        0, 1, 3, 2, 2, 2, 1, 2, 3, 0, 0, 0, 2, 2, 2, 2, 1, 3, 3, 2, 0, 1, 3, 0, 2, 0, 0, 3, 3, 0,
        2, 1, 2, 3, 2, 0, 0, 0, 2, 2, 0, 1, 3, 0, 1, 2, 1, 3, 0, 2, 0, 1, 3, 3, 0, 0, 1, 3, 2, 2,
        0, 1, 3, 0, 0, 1, 1, 3, 3, 0, 2, 1, 3, 3, 4, 0, 1, 3, 2, 4, 2, 1, 3, 3, 2, 0, 1, 3, 0, 2,
        0, 1, 3, 2, 4, 0, 1, 3, 0, 4, 0, 1, 3, 2, 2, 0, 0, 2, 2, 0, 0, 1, 2, 3, 4, 0, 1, 3, 0, 0,
        2, 1, 3, 3, 2, 0, 1, 3, 2, 0, 0, 1, 3, 3, 0, 0, 1, 3, 3, 2, 2, 1, 3, 2, 1, 0, 0, 3, 3, 2,
        0, 1, 3, 3, 2, 2, 1, 3, 0, 3, 0, 1, 1, 2, 2, 0, 1, 2, 3, 0, 2, 1, 3, 2, 4, 0, 0, 0, 1, 2,
        0, 1, 3, 3, 0, 2, 1, 3, 3, 4, 0, 1, 3, 2, 1, 0, 1, 3, 3, 2, 2, 1, 2, 3, 0, 1, 0, 3, 0, 3,
        0, 0, 3, 3, 2, 2, 0, 0, 3, 4, 2, 1, 2, 2, 2, 0, 1, 3, 3, 0, 0, 1, 3, 2, 2, 2, 1, 2, 2, 0,
        2, 0, 0, 3, 0, 2, 1, 3, 2, 2, 0, 1, 2, 1, 2, 0, 1, 3, 3, 0, 0, 1, 2, 3, 4, 0, 1, 2, 3, 0,
        0, 1, 3, 2, 0, 0, 1, 2, 2, 1, 0, 0, 2, 2, 2, 2, 1, 3, 2, 0, 0, 1, 3, 0, 3, 0, 0, 3, 3, 0,
        0, 1, 3, 3, 2, 0, 1, 2, 3, 2, 0, 1, 3, 2, 1, 0, 0, 3, 2, 4, 0, 1, 3, 2, 2, 2, 1, 2, 3, 4,
        0, 1, 3, 2, 2, 0, 1, 3, 2, 0, 2, 1, 3, 2, 0, 1, 0, 3, 2, 2, 0, 1, 3, 3, 0, 0, 1, 2, 1, 3,
        0, 0, 3, 0, 0, 2, 1, 3, 3, 2, 0, 1, 3, 0, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 4, 0, 1, 3, 2, 0,
        0, 1, 3, 0, 1, 1, 0, 3, 0, 4, 0, 0, 1, 3, 0, 0, 1, 3, 2, 2, 2, 1, 3, 2, 4, 0, 1, 3, 3, 2,
        2, 1, 3, 3, 0, 0, 0, 2, 0, 4, 0, 0, 2, 1, 0, 1, 1, 3, 3, 2, 0, 1, 2, 3, 0, 0, 1, 0, 3, 0,
        2, 1, 3, 3, 2, 2, 1, 3, 2, 2, 2, 1, 3, 3, 2, 2, 1, 2, 2, 2, 0, 1, 3, 3, 4, 0, 1, 3, 0, 2,
        0, 1, 3, 3, 4, 2, 1, 3, 3, 0, 0, 1, 1, 2, 1, 1, 1, 2, 3, 2, 0, 1, 3, 2, 0, 1, 1, 3, 2, 4,
        0, 1, 3, 2, 2, 0, 1, 3, 2, 0, 0, 0, 2, 1, 3, 2, 1, 0, 3, 4, 0, 1, 3, 3, 2, 2, 1, 2, 3, 2,
        0, 0, 2, 3, 2, 0, 1, 2, 3, 0, 2, 1, 3, 3, 0, 0, 1, 3, 3, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 0,
        2, 1, 3, 2, 0, 0, 0, 2, 3, 0, 0, 1, 3, 3, 2, 2, 1, 3, 3, 2, 0, 1, 3, 3, 2, 0, 1, 3, 2, 2,
        0, 1, 3, 3, 2, 0, 1, 3, 2, 2, 2, 1, 0, 3, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 0, 0, 1, 2, 3, 0,
        2, 1, 2, 2, 2, 0, 1, 3, 3, 2, 2, 0, 0, 3, 0, 0, 0, 3, 3, 0, 2, 1, 3, 0, 2, 2, 0, 2, 2, 2,
        2, 0, 3, 2, 2, 0, 1, 3, 2, 2, 0, 1, 3, 0, 4, 0, 0, 2, 0, 1, 1, 0, 3, 2, 0, 2, 1, 3, 0, 3,
        0, 0, 3, 3, 2, 2, 1, 3, 3, 4, 0, 1, 3, 2, 2, 0, 0, 2, 3, 0, 2, 1, 3, 0, 4, 2, 1, 3, 2, 4,
        2, 1, 3, 3, 2, 0, 1, 3, 3, 4, 0, 1, 3, 3, 2, 0, 0, 2, 2, 0, 2, 0, 2, 3, 2, 2, 1, 2, 3, 0,
        1, 1, 3, 3, 0, 0, 1, 3, 2, 0, 1, 1, 3, 3, 0, 2, 1, 0, 3, 2, 2, 1, 3, 3, 0, 0, 0, 2, 2, 1,
        0, 1, 3, 0, 2, 0, 1, 2, 1, 3, 0, 1, 2, 3, 0, 0, 1, 3, 3, 0, 2, 1, 3, 0, 2, 2, 0, 0, 3, 1,
        0, 0, 3, 3, 0, 0, 1, 3, 2, 2, 2, 0, 0, 1, 3, 0, 1, 2, 2, 2, 0, 1, 3, 2, 0, 0, 1, 3, 3, 0,
        2, 0, 2, 2, 0, 0, 1, 3, 3, 0, 0, 1, 3, 3, 0, 0, 1, 3, 0, 4, 2, 1, 3, 0, 3, 0, 1, 0, 3, 1,
        2, 1, 3, 2, 0, 0, 0, 1, 2, 2, 0, 1, 3, 2, 0, 0, 1, 1, 2, 2, 0, 1, 2, 2, 4, 0, 1, 3, 3, 0,
        0, 1, 3, 2, 2, 0, 1, 3, 0, 0, 2, 1, 3, 3, 0, 0, 1, 2, 3, 4, 0, 1, 3, 3, 0, 2, 0, 2, 2, 0,
        2, 1, 2, 3, 0, 0, 1, 3, 2, 4, 0, 0, 2, 3, 0, 0, 1, 3, 2, 0, 0, 0, 2, 3, 0, 0, 1, 3, 2, 1,
        0, 1, 3, 3, 4, 0, 0, 0, 3, 0, 2, 1, 3, 3, 0, 2, 0, 0, 3, 2, 0, 1, 2, 2, 2, 0, 1, 0, 3, 2,
        0, 1, 3, 2, 4, 0, 1, 2, 2, 2, 0, 1, 3, 3, 4, 0, 0, 2, 2, 2, 0, 1, 2, 1, 2, 0, 1, 3, 2, 2,
        0, 1, 3, 3, 0, 0, 1, 3, 3, 4, 0, 0, 2, 3, 0, 0, 0, 0, 2, 1, 2, 0, 1, 2, 2, 0, 0, 2, 3, 2,
        2, 1, 3, 2, 2, 0, 1, 3, 3, 0, 0, 1, 2, 2, 1, 1, 1, 3, 3, 2, 0, 1, 2, 1, 3, 0, 1, 0, 3, 1,
        1, 1, 3, 3, 4, 0, 1, 3, 0, 3, 2, 1, 3, 3, 2, 0, 1, 3, 3, 0, 2, 1, 3, 3, 0, 2, 1, 3, 3, 4,
        0, 1, 0, 3, 2, 2, 1, 2, 1, 2, 2, 0, 0, 2, 0, 2, 1, 3, 2, 2, 0, 1, 2, 2, 4, 0, 0, 2, 2, 4,
        0, 1, 2, 3, 0, 2, 1, 2, 1, 4, 0, 0, 0, 3, 0, 0, 1, 3, 3, 0, 0, 1, 3, 2, 0, 2, 1, 2, 1, 2,
        0, 1, 2, 2, 2, 2, 1, 3, 3, 0, 0, 1, 3, 2, 2, 0, 1, 3, 3, 0, 0, 1, 3, 2, 1, 0, 1, 3, 3, 0,
        0, 1, 2, 2, 2, 2, 1, 1, 2, 4, 0, 0, 0, 3, 0, 2, 1, 2, 3, 2, 0, 1, 3, 2, 2, 0, 1, 3, 0, 4,
        0, 1, 3, 3, 0, 0, 1, 2, 3, 2, 0, 1, 3, 0, 3, 0, 1, 3, 2, 0, 0, 1, 3, 3, 2, 0, 1, 3, 0, 2,
        0, 1, 3, 0, 2, 2, 1, 2, 1, 2, 0, 1, 3, 3, 4, 0, 0, 0, 0, 0, 0, 0, 3, 0, 3, 0, 0, 2, 3, 0,
        0, 0, 3, 2, 0, 0, 1, 2, 3, 0, 0, 1, 3, 3, 4, 0, 1, 2, 1, 3, 0, 1, 2, 2, 1, 1, 1, 2, 1, 3,
        0, 0, 3, 0, 3, 2, 1, 3, 3, 2, 2, 1, 3, 3, 0, 0, 1, 2, 3, 0, 1, 0, 3, 2, 0, 2, 1, 3, 0, 4,
        0, 1, 0, 3, 0, 0, 1, 3, 3, 0, 0, 1, 3, 0, 2, 2, 1, 2, 3, 0, 0, 0, 2, 3, 2, 2, 1, 2, 3, 4,
        2, 1, 3, 2, 0, 1, 0, 3, 2, 0, 1, 0, 3, 2, 0, 0, 1, 3, 2, 4, 2, 1, 0, 3, 0, 2, 1, 3, 2, 2,
        0, 1, 3, 0, 0, 2, 1, 3, 2, 1, 1, 0, 3, 0, 2, 0, 1, 3, 3, 2, 2, 1, 3, 3, 2, 0, 1, 2, 1, 2,
        2, 1, 1, 2, 2, 0, 1, 2, 1, 1, 1, 1, 3, 3, 0, 0, 1, 3, 3, 2, 2, 1, 2, 3, 2, 0, 1, 3, 2, 2,
        0, 0, 2, 3, 0, 0, 0, 2, 0, 2, 0, 1, 3, 3, 2, 0, 1, 3, 3, 0, 0, 1, 3, 3, 4,
    ];
    println!("Part 2: {}", solve_b(1000000000000, &prefix, &cycle));
}
